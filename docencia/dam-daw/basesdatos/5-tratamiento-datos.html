<!doctype html>
<html lang="es-ES" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.24" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.94" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Tema 5: Tratamiento de datos","image":[""],"dateModified":"2025-09-08T09:38:27.000Z","author":[{"@type":"Person","name":"darioaxel","url":"darioaxel.dev"}]}</script><meta property="og:url" content="https://vuepress-theme-hope-docs-demo.netlify.app/docencia/dam-daw/basesdatos/5-tratamiento-datos.html"><meta property="og:site_name" content="darioaxel"><meta property="og:title" content="Tema 5: Tratamiento de datos"><meta property="og:description" content="Tema 5: Tratamiento de datos Tareas y Ejercicios 1. Introducci√≥n Las bases de datos no tienen raz√≥n de ser sin la posibilidad de hacer operaciones para el tratamiento de la info..."><meta property="og:type" content="article"><meta property="og:locale" content="es-ES"><meta property="og:updated_time" content="2025-09-08T09:38:27.000Z"><meta property="article:modified_time" content="2025-09-08T09:38:27.000Z"><title>Tema 5: Tratamiento de datos | darioaxel</title><meta name="description" content="Tema 5: Tratamiento de datos Tareas y Ejercicios 1. Introducci√≥n Las bases de datos no tienen raz√≥n de ser sin la posibilidad de hacer operaciones para el tratamiento de la info...">
    <link rel="preload" href="/assets/style-DuHGKoZd.css" as="style"><link rel="stylesheet" href="/assets/style-DuHGKoZd.css">
    <link rel="modulepreload" href="/assets/app-BIs-xwTd.js"><link rel="modulepreload" href="/assets/5-tratamiento-datos.html-Qd5HVESp.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/assets/index.html-CuTCwKWA.js" as="script"><link rel="prefetch" href="/assets/portfolio.html-DHd7LCK3.js" as="script"><link rel="prefetch" href="/assets/index.html-GHWlaJZp.js" as="script"><link rel="prefetch" href="/assets/disable.html-DfS7CDdz.js" as="script"><link rel="prefetch" href="/assets/encrypt.html-GA4Sy_hR.js" as="script"><link rel="prefetch" href="/assets/layout.html-DmsTgoBN.js" as="script"><link rel="prefetch" href="/assets/markdown.html-_I34PxUF.js" as="script"><link rel="prefetch" href="/assets/page.html-D4LGS5il.js" as="script"><link rel="prefetch" href="/assets/index.html-84HZgSOn.js" as="script"><link rel="prefetch" href="/assets/index.html-CEOgTAKn.js" as="script"><link rel="prefetch" href="/assets/index.html-CY3cJocU.js" as="script"><link rel="prefetch" href="/assets/adaptacion-theme-hope.html-CZYUtXVD.js" as="script"><link rel="prefetch" href="/assets/django-rest-api-docker.html-ifBHdzVd.js" as="script"><link rel="prefetch" href="/assets/first-article.html-Cb3tw5bO.js" as="script"><link rel="prefetch" href="/assets/introduccion-algoritmos-1.html-EDvvw7DP.js" as="script"><link rel="prefetch" href="/assets/introduccion-algoritmos-2.html-CMU2z3ja.js" as="script"><link rel="prefetch" href="/assets/python-patterns.html-DyIfuslt.js" as="script"><link rel="prefetch" href="/assets/vibecoding.html-EZljXba4.js" as="script"><link rel="prefetch" href="/assets/index.html-CAy9fPW2.js" as="script"><link rel="prefetch" href="/assets/index.html-ZgcCEphx.js" as="script"><link rel="prefetch" href="/assets/index.html-dBRTS3VY.js" as="script"><link rel="prefetch" href="/assets/baz.html-B0yMkg_n.js" as="script"><link rel="prefetch" href="/assets/index.html-BdUQ9J1c.js" as="script"><link rel="prefetch" href="/assets/ray.html-CauOfqQw.js" as="script"><link rel="prefetch" href="/assets/00-introduccion.html-DHIr57ib.js" as="script"><link rel="prefetch" href="/assets/01-arquitecturas-web.html-CzMXC9dz.js" as="script"><link rel="prefetch" href="/assets/02-lenguajesdwes.html-BXl4nyJT.js" as="script"><link rel="prefetch" href="/assets/03-MVC-patrones.html-BuRJSPxL.js" as="script"><link rel="prefetch" href="/assets/04-persistencia-datos.html-Dx8_sFkI.js" as="script"><link rel="prefetch" href="/assets/05-servicios-web.html-DVsVyPW9.js" as="script"><link rel="prefetch" href="/assets/06-cookies-y-seguridad.html-C_yo8k9E.js" as="script"><link rel="prefetch" href="/assets/07-aplicaciones-web-din√°micas.html-CyJD4QKt.js" as="script"><link rel="prefetch" href="/assets/08-aplicaciones-web-hibridas.html-DV33pgLx.js" as="script"><link rel="prefetch" href="/assets/98-creditos-reconocimientos.html-CoDnZ5Ru.js" as="script"><link rel="prefetch" href="/assets/99-bibliografia.html-CWW_oLDz.js" as="script"><link rel="prefetch" href="/assets/Anexo-I-django.html-Bd-ik0Rj.js" as="script"><link rel="prefetch" href="/assets/index.html-UNMqCB0b.js" as="script"><link rel="prefetch" href="/assets/0-introduccion.html-TyDxTqO2.js" as="script"><link rel="prefetch" href="/assets/1-sistemas-de-ficheros.html-DXhYTe4s.js" as="script"><link rel="prefetch" href="/assets/2-1-algebra-relacional.html-D8ZOBtqk.js" as="script"><link rel="prefetch" href="/assets/2-diseno-logico.html-DKjvnNAk.js" as="script"><link rel="prefetch" href="/assets/3-diseno-fisico.html-CcLqw75Z.js" as="script"><link rel="prefetch" href="/assets/4-realizacion-consultas.html-CFnyG7-0.js" as="script"><link rel="prefetch" href="/assets/98-creditos-reconocimientos.html-DhSbPrsp.js" as="script"><link rel="prefetch" href="/assets/99-bibliografia.html-CC9uA4AL.js" as="script"><link rel="prefetch" href="/assets/index.html-CNglSwvS.js" as="script"><link rel="prefetch" href="/assets/1-conceptos-bbdd.html-DDz9l25i.js" as="script"><link rel="prefetch" href="/assets/2-instalacion-bbdd.html-BmB2h1rT.js" as="script"><link rel="prefetch" href="/assets/3-optimizacion-y-monitorizacion.html-CFDAvai1.js" as="script"><link rel="prefetch" href="/assets/98-creditos-reconocimientos.html-VQO0mnrN.js" as="script"><link rel="prefetch" href="/assets/99-bibliografia.html-DzMlDsGD.js" as="script"><link rel="prefetch" href="/assets/index.html-C6fZ12q8.js" as="script"><link rel="prefetch" href="/assets/98-creditos-reconocimientos.html-DXtYk-u_.js" as="script"><link rel="prefetch" href="/assets/99-bibliografia.html-B9v2pSGB.js" as="script"><link rel="prefetch" href="/assets/UT00-intruccion.html-B8mIR5vf.js" as="script"><link rel="prefetch" href="/assets/UT01-ejercicios-arquitecturas.html-CmhQpLDt.js" as="script"><link rel="prefetch" href="/assets/UT02-ejercicios-lenguajes.html-CazzYQ1T.js" as="script"><link rel="prefetch" href="/assets/UT03-ejercicios.html-BUzbpLLT.js" as="script"><link rel="prefetch" href="/assets/UT04-ejercicios.html-DG4CsZc1.js" as="script"><link rel="prefetch" href="/assets/VideoTutorias.html-BufoDnDi.js" as="script"><link rel="prefetch" href="/assets/UT01-Arquitecturas-web.html-Jjl176VW.js" as="script"><link rel="prefetch" href="/assets/UT02.1-LenguajesProgramacionWeb.html-CRMwNEcV.js" as="script"><link rel="prefetch" href="/assets/UT02.2-LenguajesProgramacionWebDjango.html-D_2VbGWR.js" as="script"><link rel="prefetch" href="/assets/UT02.3-LenguajesProgramacionWebJakartaEE.html-DeVGI9GB.js" as="script"><link rel="prefetch" href="/assets/UT03-MVCyPatrones.html-D3TmGaVD.js" as="script"><link rel="prefetch" href="/assets/UT01-sistemas-de-ficheros.html-WjEl7vrg.js" as="script"><link rel="prefetch" href="/assets/404.html-B7np0LUM.js" as="script"><link rel="prefetch" href="/assets/index.html-CYr2ozDw.js" as="script"><link rel="prefetch" href="/assets/index.html-DycrFKeq.js" as="script"><link rel="prefetch" href="/assets/index.html-DCqdQ9SC.js" as="script"><link rel="prefetch" href="/assets/index.html-D8GXlx5p.js" as="script"><link rel="prefetch" href="/assets/index.html-CIg8Gwy4.js" as="script"><link rel="prefetch" href="/assets/index.html-DT_DXKVL.js" as="script"><link rel="prefetch" href="/assets/index.html-B8bpc15Y.js" as="script"><link rel="prefetch" href="/assets/index.html-B8DqR8yg.js" as="script"><link rel="prefetch" href="/assets/index.html-O4qLQZTK.js" as="script"><link rel="prefetch" href="/assets/index.html-BbuiGdKE.js" as="script"><link rel="prefetch" href="/assets/index.html-CGjCJPhL.js" as="script"><link rel="prefetch" href="/assets/index.html-D97PxyKR.js" as="script"><link rel="prefetch" href="/assets/index.html-CfOi7MpY.js" as="script"><link rel="prefetch" href="/assets/index.html--8YIL-ol.js" as="script"><link rel="prefetch" href="/assets/index.html-DrZDB48M.js" as="script"><link rel="prefetch" href="/assets/index.html-BTWC6aVo.js" as="script"><link rel="prefetch" href="/assets/index.html-CJzasZVk.js" as="script"><link rel="prefetch" href="/assets/index.html-DufycTCw.js" as="script"><link rel="prefetch" href="/assets/index.html-DbPegof7.js" as="script"><link rel="prefetch" href="/assets/index.html-BtFP1oyu.js" as="script"><link rel="prefetch" href="/assets/index.html-BhIIGX99.js" as="script"><link rel="prefetch" href="/assets/index.html-D4RL_Kt1.js" as="script"><link rel="prefetch" href="/assets/index.html-BbpNUNDY.js" as="script"><link rel="prefetch" href="/assets/index.html-CYr2ozDw.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-CKV1Bsxh.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Saltar al contenido principal</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/" aria-label="Ll√©vame al inicio"><img class="vp-nav-logo" src="/assets/image/space-invader-icon.svg" alt><!----><span class="vp-site-name hide-in-pad">darioaxel</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="Home"><!--[--><iconify-icon class="vp-icon" icon="fa6-solid:house" sizing="height" height="1em"></iconify-icon><!--]-->Home<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="Docencia"><!--[--><iconify-icon class="vp-icon" icon="fa6-solid:lightbulb" sizing="height" height="1em"></iconify-icon>Docencia<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">CFGS DAM/DAW</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link route-link-active auto-link" href="/docencia/dam-daw/basesdatos/" aria-label="0484 Bases de Datos"><!---->0484 Bases de Datos<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/docencia/dam-daw/DWES/" aria-label="0613 Desarrollo Web Entorno Servidor"><!---->0613 Desarrollo Web Entorno Servidor<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">CFGS ASIR</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/docencia/asir/gestionbasesdatos/" aria-label="0378 Gesti√≥n Bases de Datos"><!---->0378 Gesti√≥n Bases de Datos<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/docencia/asir/admonsgbd/" aria-label="0378 Admon. Sistemas Gestores BBDD"><!---->0378 Admon. Sistemas Gestores BBDD<!----></a></li></ul></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">Ciclos Expecializaci√≥n</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/docencia/ce/pia/" aria-label="Programaci√≥n para IA"><!---->Programaci√≥n para IA<!----></a></li></ul></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/blog/" aria-label="Blog"><!--[--><iconify-icon class="vp-icon" icon="fa6-solid:book" sizing="height" height="1em"></iconify-icon><!--]-->Blog<!----></a></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com//darioaxel" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/docencia/dam-daw/basesdatos/" aria-label="Bases Datos"><!--[--><iconify-icon class="vp-icon" icon="fa6-solid:laptop-code" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->Bases Datos<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">Ejercicios</span><span class="vp-arrow end"></span></button><!----></section></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/docencia/dam-daw/basesdatos/5-tratamiento-datos.html" aria-label="Tema 5: Tratamiento de datos"><!---->Tema 5: Tratamiento de datos<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/docencia/dam-daw/basesdatos/0-introduccion.html" aria-label="UT00 Introducci√≥n"><!--[--><iconify-icon class="vp-icon" icon="material-symbols:book-5-outline" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->UT00 Introducci√≥n<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/docencia/dam-daw/basesdatos/1-sistemas-de-ficheros.html" aria-label="UT01 Sistemas de Ficheros"><!--[--><iconify-icon class="vp-icon" icon="material-symbols:book-5-outline" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->UT01 Sistemas de Ficheros<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/docencia/dam-daw/basesdatos/2-diseno-logico.html" aria-label="UT02 Dise√±o l√≥gico de Bases de Datos"><!--[--><iconify-icon class="vp-icon" icon="material-symbols:book-5-outline" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->UT02 Dise√±o l√≥gico de Bases de Datos<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/docencia/dam-daw/basesdatos/2-1-algebra-relacional.html" aria-label="UT02.1 √Ålgebra relacional"><!--[--><iconify-icon class="vp-icon" icon="material-symbols:book-5-outline" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->UT02.1 √Ålgebra relacional<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/docencia/dam-daw/basesdatos/3-diseno-fisico.html" aria-label="UT03 Dise√±o f√≠sico de Bases de Datos"><!--[--><iconify-icon class="vp-icon" icon="material-symbols:book-5-outline" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->UT03 Dise√±o f√≠sico de Bases de Datos<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/docencia/dam-daw/basesdatos/4-realizacion-consultas.html" aria-label="UT04 Realizaci√≥n de consultas"><!--[--><iconify-icon class="vp-icon" icon="material-symbols:book-5-outline" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->UT04 Realizaci√≥n de consultas<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/docencia/dam-daw/basesdatos/99-bibliografia.html" aria-label="Bibliograf√≠a"><!--[--><iconify-icon class="vp-icon" icon="material-symbols:local-library-outline" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->Bibliograf√≠a<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/docencia/dam-daw/basesdatos/98-creditos-reconocimientos.html" aria-label="Cr√©ditos y reconocimientos"><!--[--><iconify-icon class="vp-icon" icon="cib:creative-commons" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->Cr√©ditos y reconocimientos<!----></a></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->Tema 5: Tratamiento de datos</h1><div class="page-info"><span class="page-author-info" aria-label="Autorüñä" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="darioaxel.dev" target="_blank" rel="noopener noreferrer">darioaxel</a></span><span property="author" content="darioaxel"></span></span><!----><span class="page-date-info" aria-label="Fecha de publicaci√≥nüìÖ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">8/9/25</span><meta property="datePublished" content="2025-09-08T09:38:27.000Z"></span><!----><span class="page-reading-time-info" aria-label="Tiempo de lectura‚åõ" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>Alrededor de 15 min</span><meta property="timeRequired" content="PT15M"></span><!----><!----></div><hr></div><!----><div class="" vp-content><!----><div id="markdown-content"><h1 id="tema-5-tratamiento-de-datos" tabindex="-1"><a class="header-anchor" href="#tema-5-tratamiento-de-datos"><span>Tema 5: Tratamiento de datos</span></a></h1><aside> üí° **Caso Pr√°ctico:** <p>Ada le ha preguntado a Juan sobre el estado actual del proyecto y √©l le comenta que est√° empezando el desarrollo de la aplicaci√≥n y va a empezar a desarrollar una serie de procesos en los que se deber√° almacenar la informaci√≥n que debe manejar la aplicaci√≥n, as√≠ como modificarla o eliminar los datos que as√≠ lo requieran.</p><p>Estas acciones de tratamiento de la informaci√≥n deber√°n asegurar que no se obtengan resultados incorrectos, por errores en la ejecuci√≥n de la aplicaci√≥n o por las acciones de los usuarios, y adem√°s debe asegurar que los datos puedan ser accesibles por varios usuarios simult√°neamente.</p><p>La aplicaci√≥n requiere que se puedan dar de alta nuevos usuarios en la base de datos, as√≠ como juegos y partidas. Adem√°s se podr√° modificar en un determinado momento la informaci√≥n personal de los usuarios, de los juegos, o a√±adir nuevos usuarios a las partidas. Tambi√©n asegurar√° la posibilidad de suprimir cualquiera de esos datos.</p><p>Se debe asegurar que, por ejemplo, una partida no haga referencia a usuario que han sido eliminado, o a juegos que no existen. Un usuario podr√° ver reducido su cr√©dito en un determinado momento, y la nueva informaci√≥n de su cr√©dito s√≥lo deber√° ser accesible cuando haya finalizado el proceso de reducci√≥n del cr√©dito, y no mientras se realiza esa actualizaci√≥n, ya que el cr√©dito disponible no estar√° actualizado.</p><p>Por supuesto, al ser una aplicaci√≥n online, distintos usuarios podr√°n realizar operaciones simult√°neamente, como crear partidas al mismo tiempo.</p></aside><p><a href="https://www.notion.so/ac3243f72a4542c4b06d56257b28ca17?pvs=21" target="_blank" rel="noopener noreferrer">Tareas y Ejercicios</a></p><hr><h1 id="_1-introduccion" tabindex="-1"><a class="header-anchor" href="#_1-introduccion"><span>1. Introducci√≥n</span></a></h1><p>Las bases de datos no tienen raz√≥n de ser sin la posibilidad de hacer operaciones para el tratamiento de la informaci√≥n almacenada en ellas. Por operaciones de tratamiento de datos se deben entender las acciones que permiten <em>a√±adir</em> informaci√≥n en ellas, <em>modificarla</em> o bien <em>suprimirla</em>.</p><p>En esta unidad podr√°s conocer que existen distintos medios para realizar el tratamiento de los datos. Desde la utilizaci√≥n de herramientas gr√°ficas hasta el uso de instrucciones o sentencias del lenguaje SQL que permiten realizar ese tipo de operaciones de una forma menos visual pero con m√°s detalle, flexibilidad y rapidez. El uso de unos mecanismos u otros depender√° de los medios disponibles y de nuestras necesidades como usuarios de la base de datos.</p><p>Pero la informaci√≥n no se puede almacenar en la base de datos sin tener en cuenta que debe seguir una serie de requisitos en las relaciones existentes entre las tablas que la componen. Todas las operaciones que se realicen respecto al tratamiento de los datos deben asegurar que las relaciones existentes entre ellos se cumplan correctamente en todo momento.</p><p>Por otro lado, la ejecuci√≥n de las aplicaciones puede fallar en un momento dado y eso no debe impedir que la informaci√≥n almacenada sea incorrecta. O incluso el mismo usuario de las aplicaciones debe tener la posibilidad de cancelar una determinada operaci√≥n y dicha cancelaci√≥n no debe suponer un problema para que los datos almacenados se encuentren en un estado fiable.</p><p>Todo esto requiere disponer de una serie de herramientas que aseguren esa fiabilidad de la informaci√≥n, y que adem√°s puede ser consultada y manipulada en sistemas multiusuario¬†sin que las acciones realizadas por un determinado usuario afecte negativamente a las operaciones de los dem√°s usuarios.</p><h2 id="_1-1-tratamiento-de-los-datos" tabindex="-1"><a class="header-anchor" href="#_1-1-tratamiento-de-los-datos"><span>1.1. Tratamiento de los datos</span></a></h2><p>El <strong>DML</strong> (Data Manipulation Language) es la parte de SQL dedicada a la manipulaci√≥n de los datos. Las sentencias <strong>DML</strong> son las siguientes:</p><ul><li><strong>SELECT</strong>: se utiliza para realizar consultas y extraer informaci√≥n de la base de datos.</li><li><strong>INSERT</strong>: se utiliza para insertar registros en las tablas de la base de datos.</li><li><strong>UPDATE</strong>: se utiliza para actualizar los registros de una tabla.</li><li><strong>DELETE</strong>: se utiliza para eliminar registros de una tabla.</li></ul><p>En este tema nos vamos a centrar en el uso de las sentencias <strong>INSERT</strong>, <strong>UPDATE</strong> y <strong>DELETE</strong>.</p><h1 id="_2-edicion-de-informacion-mediante-aplicaciones-graficas" tabindex="-1"><a class="header-anchor" href="#_2-edicion-de-informacion-mediante-aplicaciones-graficas"><span>2. Edici√≥n de informaci√≥n mediante aplicaciones gr√°ficas</span></a></h1><p>En este m√≥dulo estamos utilizando DBeaver, que es una herramienta de edici√≥n visual de trabajo para bases de datos muy potente. En su documentaci√≥n oficial se explica con gran cantidad de detalle cada una de las posibilidades que tiene [ <a href="https://dbeaver.com/wp-content/uploads/wikidocs_archive/dbeaver_v_21_2.pdf" target="_blank" rel="noopener noreferrer">enlace a la documentaci√≥n oficial</a> ]</p><p>Por ejemplo, para la inserci√≥n de datos podemos ir a la pesta√±a <em><strong>Datos</strong></em> de la tabla a modificar:</p><figure><img src="" alt="image.png" tabindex="0" loading="lazy"><figcaption>image.png</figcaption></figure><p>Una vez ah√≠, hacer click sobre <em><strong>Edici√≥n - &gt; A√±adir registro</strong></em></p><figure><img src="" alt="image201.png" tabindex="0" loading="lazy"><figcaption>image201.png</figcaption></figure><p>Y podremos introducir manualmente cada uno de los valores del nuevo registro.</p><figure><img src="" alt="image202.png" tabindex="0" loading="lazy"><figcaption>image202.png</figcaption></figure><p>IMPORTANTE! Recuerda que has de grabar los datos con los botones que se muestran en la parte inferior de la tabla:</p><figure><img src="" alt="image203.png" tabindex="0" loading="lazy"><figcaption>image203.png</figcaption></figure><h1 id="_3-edicion-de-informacion-mediante-comandos-sql" tabindex="-1"><a class="header-anchor" href="#_3-edicion-de-informacion-mediante-comandos-sql"><span>3. Edici√≥n de informaci√≥n mediante comandos SQL</span></a></h1><h2 id="_3-1-la-sentencia-insert" tabindex="-1"><a class="header-anchor" href="#_3-1-la-sentencia-insert"><span>3.1. La sentencia <em><strong>INSERT</strong></em></span></a></h2><p>La sentencia¬†<em><strong>INSERT</strong></em>¬†permite la inserci√≥n de nuevas filas o registros en una tabla existente. Seg√∫n la documentaci√≥n oficial de PostgreSQL, esta es la sintaxis de la sentencia¬†<em><strong>INSERT</strong></em>¬†en PostgreSQL:</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> table_name </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">[ ( column_name [, ...]</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ) ]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    { </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DEFAULT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> VALUES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ( { expression | </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DEFAULT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> } </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">[, ...]</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ) </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">[, ...]</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | query }</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    [ ON CONFLICT [ conflict_target ]</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> conflict_action ]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">    [ RETURNING * | output_expression [ [ AS ]</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> output_name ] </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">[, ...]</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>El formato m√°s sencillo de utilizaci√≥n de la sentencia¬†<em><strong>INSERT</strong></em>¬†tiene la siguiente sintaxis:</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> nombre_tabla (lista_campos) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (lista_valores);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Donde:</p><ul><li><em>nombre_tabla</em>¬†ser√° el nombre de la tabla en la que quieras a√±adir nuevos registros.</li><li>En <em>lista_campos</em> se indicar√°n los campos de dicha tabla en los que se desea escribir los nuevos valores indicados en¬†<em>lista_valores</em>. Es posible omitir la lista de campos (<em>lista_campos</em>), si se indican todos los valores de cada campo y en el orden en el que se encuentran en la tabla. <ul><li>Tanto la lista de campos¬†<em>lista_campos</em>¬†como la de valores¬†<em>lista_valores</em>, tendr√°n separados por comas cada uno de sus elementos.</li><li>Hay que tener en cuenta tambi√©n que cada campo de¬†<em>lista_campos</em>¬†debe tener un valor v√°lido en la posici√≥n correspondiente de la¬†<em>lista_valores</em>¬†(Si no recuerdas los valores v√°lidos para cada campo puedes utilizar la sentencia¬†<strong><code>*DESCRIBE*</code></strong>¬†seguida del nombre de la tabla que deseas consultar).</li></ul></li></ul><p>Para poder probar los ejemplos debes tener creadas y cargadas las tablas de <strong><code>Jardineria</code></strong></p><p>Antes de ejecutar el siguiente ejemplo que¬†inserta un nuevo registro en la tabla¬†<strong><code>*USUARIOS*</code></strong>¬†en el que se tienen todos los datos disponibles debes ejecutar la sentencia</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> DateStyle </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;ISO, DMY&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>para que tome la fecha en ese formato en el que le estamos dando el dato fecha. De otro modo tendr√°s que utilizar el formato internacional. <strong>CUIDADO!</strong> Este cambio solo afecta a la sesi√≥n actual y se pierde al reiniciar.</p><p>Veamos la estructura de la tabla con la que trabajaremos a continuaci√≥n:</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> oficina</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  codigo_oficina </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">NOT NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  ciudad </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">30</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">NOT NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  pais </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">50</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">NOT NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  region </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">50</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DEFAULT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  codigo_postal </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">NOT NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  telefono </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">20</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">NOT NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  linea_direccion1 </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">50</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">NOT NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  linea_direccion2 </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">50</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DEFAULT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  PRIMARY KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (codigo_oficina)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>A continuaci√≥n haremos una inserci√≥n de datos:</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> oficina (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    codigo_oficina, ciudad, pais, region, codigo_postal, telefono, linea_direccion1, linea_direccion2</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &#39;OF001&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Madrid&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Espa√±a&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Comunidad de Madrid&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;28001&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;+34 912 345 678&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Calle Gran V√≠a, 1&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Piso 3, Puerta B&#39;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>En este otro ejemplo, se inserta un registro de igual manera, pero sin disponer de todos los datos, en este caso de la regi√≥n, que por defecto el sistema incluir√° como NULL:</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> oficina (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    codigo_oficina, ciudad, pais, codigo_postal, telefono, linea_direccion1</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    &#39;OF003&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Valencia&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Espa√±a&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;46001&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;+34 963 987 654&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Calle Col√≥n, 20&#39;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Al hacer un¬†<strong><code>*INSERT*</code></strong>¬†en el que no se especifiquen los valores de todos los campos, se obtendr√° el valor¬†<strong><code>*NULL*</code></strong>¬†en aquellos campos que no se han indicado.</p><p>Si la lista de campos indicados no se corresponde con la lista de valores, o si no se proporcionan valores para campos que no admiten el valor¬†<strong><code>NULL</code></strong>, se obtendr√° un error en la ejecuci√≥n.</p><h2 id="_3-2-la-sentencia-update" tabindex="-1"><a class="header-anchor" href="#_3-2-la-sentencia-update"><span>3.2. La sentencia UPDATE</span></a></h2><p>La sentencia¬†<strong><code>*UPDATE*</code></strong>¬†permite modificar una serie de valores de determinados registros de las tablas de la base de datos.</p><p>La manera m√°s sencilla de utilizar la sentencia¬†<strong><code>*UPDATE*</code></strong>¬†tiene la siguiente sintaxis:</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> nombre_tabla </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> nombre_campo </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> valor </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">[, nombre_ campo = valor]</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">[ WHERE condici√≥n ]</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>Donde¬†<em>nombre_tabla</em>¬†ser√° el nombre de la tabla en la que quieras modificar datos. Se pueden especificar los nombres de campos que se deseen de la tabla indicada. A cada campo especificado se le debe asociar el nuevo valor utilizando el signo =. Cada emparejamiento¬†<em>campo=valor</em>¬†debe separarse del siguiente utilizando comas (,).</p><p>La cl√°usula¬†<strong><code>*WHERE*</code></strong>¬†seguida de la condici√≥n es opcional (como pretenden indicar los corchetes). Si se indica, la actualizaci√≥n de los datos s√≥lo afectar√° a los registros que cumplen la condici√≥n. Por tanto, ten en cuenta que si no indicas la cl√°usula¬†<strong><code>*WHERE*</code></strong>, los cambios afectar√°n a todos los registros.</p><p>En este apartado trabajaremos sobre la siguiente tabla:</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> cliente</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  codigo_cliente </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INTEGER</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> NOT NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  nombre_cliente </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">50</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">NOT NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  nombre_contacto </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">30</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DEFAULT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  apellido_contacto </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">30</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DEFAULT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  telefono </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">15</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">NOT NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  fax </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">15</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">NOT NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  linea_direccion1 </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">50</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">NOT NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  linea_direccion2 </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">50</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DEFAULT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  ciudad </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">50</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">NOT NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  region </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">50</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DEFAULT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  pais </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">50</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DEFAULT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  codigo_postal </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DEFAULT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  codigo_empleado_rep_ventas </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INTEGER</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> DEFAULT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  limite_credito </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">NUMERIC</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">15</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DEFAULT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  PRIMARY KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (codigo_cliente),</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">  FOREIGN KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (codigo_empleado_rep_ventas) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">REFERENCES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> empleado (codigo_empleado)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Por ejemplo, si se desea poner a 200.00 el l√≠mite cr√©dito de todos los clientes:</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> cliente </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> limite_credito </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 200</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">00</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>En este otro ejemplo puedes ver la actualizaci√≥n de dos campos, poniendo a 0 el l√≠mite de cr√©dito y poniendo a Nulos la informaci√≥n del campo¬†linea_direccion2 de todos los usuarios:</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> cliente </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> limite_credito </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, linea_direccion2 </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Para que los cambios afecten a determinados registros hay que especificar una condici√≥n. Por ejemplo, si se quiere cambiar el cr√©dito de todos los clientes de Zaragoza:</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> cliente </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> limite_credito </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 300</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">25</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ciudad </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;Zaragoza&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Cuando termina la ejecuci√≥n de una sentencia¬†<strong><code>*UPDATE*</code></strong>, se muestra la cantidad de registros (filas) que han sido actualizadas, o el error correspondiente si se ha producido alg√∫n problema. Por ejemplo podr√≠amos encontrarnos con un mensaje similar al siguiente:</p><p><code>9 fila(s) actualizada(s).</code></p><h2 id="_3-3-la-sentencia-delete" tabindex="-1"><a class="header-anchor" href="#_3-3-la-sentencia-delete"><span>3.3. La sentencia DELETE</span></a></h2><p>La sentencia¬†<strong><code>*DELETE*</code></strong>¬†es la que permite eliminar o borrar registros de un tabla.</p><p>Esta es la sintaxis que debes tener en cuenta para utilizarla:</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DELETE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> nombre_tabla </span><span style="--shiki-light:#383A42;--shiki-dark:#E06C75;">[ WHERE condici√≥n ]</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Al igual que hemos visto en las sentencias anteriores, nombre_tabla hace referencia a la tabla sobre la que se har√° la operaci√≥n, en este caso de borrado. Se puede observar que la cl√°usula¬†<strong><code>*WHERE*</code></strong>¬†es opcional. Si no se indica, debes tener muy claro que se borrar√° todo el contenido de la tabla, aunque la tabla seguir√° existiendo con la estructura que ten√≠a hasta el momento.</p><p>Por ejemplo, si usas la siguiente sentencia, borrar√°s todos los registros de la tabla¬†<strong><code>*cliente*:</code></strong></p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DELETE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> cliente;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Es tan importante escribir la cl√°usula¬†¬†<strong><code>WHERE</code></strong>¬†en la sentencia,¬† si no quieres borrar la tabla entera, que incluso hay una canci√≥n que lo recuerda.. Puedes verla en este¬†<a href="https://www.youtube.com/watch?v=i_cVJgIz_Cs" target="_blank" rel="noopener noreferrer">enlace</a>.</p><aside> üî• <p>La cl√°usula <strong><code>DELETE</code></strong> es una de las m√°s peligrosas y con la que todos hemos tenido problemas. Uno de los mejores consejos para evitarlos que me han dado es SIEMPRE poner AL MENOS 2 condiciones en el <strong><code>WHERE</code></strong>, incluso aunque sean triviales, en toda sentencia <strong><code>DELETE</code></strong></p></aside><p>Para ver un ejemplo de uso de la sentencia¬†<strong><code>*DELETE*</code></strong>¬†en la que se indique una condici√≥n, supongamos que queremos eliminar todos los clientes de Estados Unidos:</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DELETE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> cliente </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> pais </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;USA&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Como resultado de la ejecuci√≥n de este tipo de sentencia, se obtendr√° un mensaje de error si se ha producido alg√∫n problema, o bien, el n√∫mero de filas que se han eliminado.</p><h3 id="_3-3-2-borrado-y-modificacion-de-datos-con-integridad" tabindex="-1"><a class="header-anchor" href="#_3-3-2-borrado-y-modificacion-de-datos-con-integridad"><span>3.3.2. Borrado y modificaci√≥n de datos con integridad</span></a></h3><p>referencial</p><p>ON DELETE y ON UPDATE: Nos permiten indicar el efecto que provoca el borrado o la actualizaci√≥n de los datos que est√°n referenciados por claves ajenas. Las opciones que podemos especificar son las siguientes:</p><ul><li><strong>RESTRICT</strong>: Impide que se puedan actualizar o eliminar las filas que tienen valores referenciados por claves ajenas. Es la opci√≥n por defecto en PostgreSQL.</li><li><strong>CASCADE</strong>: Permite actualizar o eliminar las filas que tienen valores referenciados por claves ajenas.</li><li><strong>SET NULL</strong>: Asigna el valor NULL a las filas que tienen valores referenciados por claves ajenas.</li><li><strong>NO ACTION</strong>: Es una palabra clave del est√°ndar SQL. En PostgreSQL es equivalente a RESTRICT.</li><li><strong>SET DEFAULT</strong>: Asigna el valor por defecto a las filas que tienen valores referenciados por claves ajenas.</li></ul><h3 id="ejemplo-practico" tabindex="-1"><a class="header-anchor" href="#ejemplo-practico"><span>Ejemplo pr√°ctico:</span></a></h3><p>Supongamos que tienes dos tablas relacionadas:¬†<strong><code>oficina</code></strong>¬†y¬†<strong><code>empleado</code></strong>, donde¬†<strong><code>empleado</code></strong>¬†tiene una clave for√°nea que referencia a¬†<strong><code>oficina</code></strong>.</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>CREATE TABLE oficina (</span></span>
<span class="line"><span>    codigo_oficina VARCHAR(10) PRIMARY KEY,</span></span>
<span class="line"><span>    ciudad VARCHAR(30) NOT NULL</span></span>
<span class="line"><span>);</span></span>
<span class="line"><span></span></span>
<span class="line"><span>CREATE TABLE empleado (</span></span>
<span class="line"><span>    id_empleado SERIAL PRIMARY KEY,</span></span>
<span class="line"><span>    nombre VARCHAR(50) NOT NULL,</span></span>
<span class="line"><span>    codigo_oficina VARCHAR(10) REFERENCES oficina(codigo_oficina) ON DELETE RESTRICT</span></span>
<span class="line"><span>);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Si intentas eliminar una fila de la tabla¬†<strong><code>oficina</code></strong>¬†que est√° siendo referenciada por alguna fila en la tabla¬†<strong><code>empleado</code></strong>, PostgreSQL lanzar√° un error y no permitir√° la eliminaci√≥n.</li><li>Esto ocurre porque¬†<strong><code>RESTRICT</code></strong>¬†es el comportamiento predeterminado.</li></ul><h3 id="comportamiento-predeterminado-en-postgresql" tabindex="-1"><a class="header-anchor" href="#comportamiento-predeterminado-en-postgresql"><span>Comportamiento predeterminado en PostgreSQL:</span></a></h3><ul><li>Si no especificas una acci√≥n en la definici√≥n de la clave for√°nea, PostgreSQL aplicar√°¬†<strong><code>RESTRICT</code></strong>¬†tanto para¬†<strong><code>ON DELETE</code></strong>¬†como para¬†<strong><code>ON UPDATE</code></strong>.</li><li>Por ejemplo, si defines la clave for√°nea sin especificar una acci√≥n:</li></ul><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>CREATE TABLE empleado (</span></span>
<span class="line"><span>    id_empleado SERIAL PRIMARY KEY,</span></span>
<span class="line"><span>    nombre VARCHAR(50) NOT NULL,</span></span>
<span class="line"><span>    codigo_oficina VARCHAR(10) REFERENCES oficina(codigo_oficina)</span></span>
<span class="line"><span>);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>En este caso, PostgreSQL aplicar√° autom√°ticamente¬†<strong><code>ON DELETE RESTRICT</code></strong>¬†y¬†<strong><code>ON UPDATE RESTRICT</code></strong>.</p><h1 id="_4-subconsultas-en-ordenes-de-edicion" tabindex="-1"><a class="header-anchor" href="#_4-subconsultas-en-ordenes-de-edicion"><span>4. Subconsultas en √≥rdenes de edici√≥n</span></a></h1><p>En unidades anteriores has podido conocer una serie de instrucciones del lenguaje SQL que han servido para realizar operaciones de inserci√≥n, modificaci√≥n y eliminaci√≥n de registros. Tal como las hemos analizado, esas operaciones se realizan con una sola tabla, pero vamos a ver que esas mismas sentencias pueden utilizarse de una forma m√°s avanzada insertando consultas dentro de esas mismas operaciones de tratamiento de datos.</p><p>Por tanto, veremos que una tabla se puede ver afectada por los resultados de las operaciones en otras tablas, es decir, que con una misma instrucci√≥n se puede a√±adir m√°s de un registro a una tabla, o bien actualizar o eliminar varios registros basados en otras consultas</p><p>Los valores que se a√±adan o se modifiquen podr√°n ser obtenidos como resultado de una consulta.</p><p>Adem√°s, las condiciones que hemos podido a√±adir hasta ahora a las sentencias, pueden ser tambi√©n consultas, por lo que pueden establecerse condiciones bastante m√°s complejas.</p><h2 id="_4-1-inserciones-y-creacion-de-tablas-mediante-subconsultas" tabindex="-1"><a class="header-anchor" href="#_4-1-inserciones-y-creacion-de-tablas-mediante-subconsultas"><span>4.1. Inserciones y creaci√≥n de tablas mediante subconsultas</span></a></h2><p>Primero vamos a crear nuestro escenario de trabajo con las siguientes tablas:</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- Crear la tabla clientes</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> clientes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SERIAL</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> PRIMARY KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    nombre </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">100</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">NOT NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    ciudad </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">100</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- Crear la tabla productos</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> productos</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SERIAL</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> PRIMARY KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    nombre </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">100</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">NOT NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    precio </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">NUMERIC</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">10</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">NOT NULL</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- Crear la tabla pedidos</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> pedidos</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SERIAL</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> PRIMARY KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    cliente_id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> REFERENCES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> clientes(id),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    fecha </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> NOT NULL</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- Crear la tabla detalles_pedidos</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> detalles_pedidos</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SERIAL</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> PRIMARY KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    pedido_id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> REFERENCES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> pedidos(id),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    producto_id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> REFERENCES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> productos(id),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    cantidad </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> NOT NULL</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Insertaremos unos pocos datos para poder hacer pruebas:</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- Insertar datos en la tabla clientes</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> clientes (nombre, ciudad) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Juan P√©rez&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Madrid&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Ana G√≥mez&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Barcelona&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Carlos Ruiz&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Valencia&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- Insertar datos en la tabla productos</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> productos (nombre, precio) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Laptop&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1200</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">00</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Smartphone&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">800</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">00</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Tablet&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">400</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">00</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- Insertar datos en la tabla pedidos</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> pedidos (cliente_id, fecha) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;2023-10-01&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;2023-10-02&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">),</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;2023-10-03&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>A continuaci√≥n vemos un ejemplo de c√≥mo realizar la inserci√≥n de datos en la tabla detalles_pedido usando datos provenientes de otras tablas:</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- Insertar datos en detalles_pedidos a partir de una SELECT</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> detalles_pedidos (pedido_id, producto_id, cantidad)</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    p</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">id</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> pedido_id,</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    pr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">id</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> producto_id,</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    2</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> cantidad </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- Supongamos que se compran 2 unidades de cada producto</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    pedidos p</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CROSS JOIN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    productos pr;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>De igual manera, podemos crear directamente una tabla con los datos insertados que necesitemos, en base al resto de la base de datos:</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- Crear la tabla resumen_pedidos</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> resumen_pedidos</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AS</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">nombre</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> cliente,</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">ciudad</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    p</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">fecha</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> fecha_pedido,</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    pr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">nombre</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> producto,</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    dp</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">cantidad</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">pr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">precio</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">dp</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">cantidad</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">AS</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> total</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    detalles_pedidos dp</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">JOIN</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    pedidos p </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ON</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> dp</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">pedido_id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> p</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">id</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">JOIN</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    clientes c </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ON</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> p</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">cliente_id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> c</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">id</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">JOIN</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    productos pr </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ON</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> dp</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">producto_id</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> pr</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">.</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">id</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-2-borrado-y-modificacion-de-filas-utilizando-subquerys" tabindex="-1"><a class="header-anchor" href="#_5-2-borrado-y-modificacion-de-filas-utilizando-subquerys"><span>5.2. Borrado y modificaci√≥n de filas utilizando subquerys</span></a></h2><p>La supresi√≥n de entradas en tablas mediante el comando <strong><code>DELETE</code></strong>( y su modificaci√≥n utilizando <strong><code>*UPDATE</code></strong>* ) son operaciones sencillas una vez dominado el lenguaje de modificaci√≥n de datos mediante SQL.</p><h1 id="_6-transacciones" tabindex="-1"><a class="header-anchor" href="#_6-transacciones"><span>6 Transacciones</span></a></h1><h2 id="_6-1-definicion" tabindex="-1"><a class="header-anchor" href="#_6-1-definicion"><span>6.1. Definici√≥n</span></a></h2><blockquote><p>Una transacci√≥n SQL es¬†un conjunto de sentencias SQL que se ejecutan formando una unidad l√≥gica de trabajo¬†(LUW del ingl√©s Logic Unit of Work), es decir,¬†en forma indivisible o at√≥mica.</p></blockquote><p>Una transacci√≥n SQL finaliza con un¬†<code>COMMIT</code>, para aceptar todos los cambios que la transacci√≥n ha realizado en la base de datos, o un¬†<code>ROLLBACK</code>¬†para deshacerlos. PostgreSQL permite realizar transacciones en todas sus tablas, ya que su motor de almacenamiento nativo (por defecto) soporta transacciones de manera completa.</p><p>El uso de transacciones nos permite realizar operaciones de forma segura y recuperar datos si se produce alg√∫n fallo en el servidor durante la transacci√≥n, pero por otro lado, las transacciones pueden aumentar el tiempo de ejecuci√≥n de las instrucciones.</p><p>Las transacciones deben cumplir las cuatro propiedades ACID.</p><h2 id="_6-2-propiedades-acid" tabindex="-1"><a class="header-anchor" href="#_6-2-propiedades-acid"><span>6.2 Propiedades ACID</span></a></h2><p>Las propiedades¬†<em><strong>ACID</strong></em>¬†garantizan que las transacciones se puedan realizar en una base de datos de forma segura. Decimos que un Sistema Gestor de Bases de Datos es ACID compliant cuando permite realizar transacciones.</p><p>ACID es un acr√≥nimo de¬†<strong>Atomicity</strong>,¬†<strong>Consistency</strong>,¬†<strong>Isolation</strong>¬†y¬†<strong>Durability</strong>.</p><ul><li><strong>Atomicidad</strong>: Esta propiedad quiere decir que una transacci√≥n es indivisible, o se ejecutan todas las sentencias o no se ejecuta ninguna.</li><li><strong>Consistencia</strong>: Esta propiedad asegura que despu√©s de una transacci√≥n la base de datos estar√° en un estado v√°lido y consistente.</li><li><strong>Aislamiento</strong>: Esta propiedad garantiza que cada transacci√≥n est√° aislada del resto de transacciones y que el acceso a los datos se har√° de forma exclusiva. Por ejemplo, si una transacci√≥n quiere acceder de forma concurrente a los datos que est√°n siendo utilizados por otra transacci√≥n, no podr√° hacerlo hasta que la primera haya terminado.</li><li><strong>Durabilidad</strong>: Esta propiedad quiere decir que los cambios que realiza una transacci√≥n sobre la base de datos son permanentes.</li></ul><h2 id="_6-3-autocommit" tabindex="-1"><a class="header-anchor" href="#_6-3-autocommit"><span>6.3 AUTOCOMMIT</span></a></h2><p>PostgreSQL tiene activada por defecto la variable¬†<code>AUTOCOMMIT</code>. Esto quiere decir que autom√°ticamente se aceptan todos los cambios realizados despu√©s de la ejecuci√≥n de una sentencia SQL y no es posible deshacerlos.</p><p>Aunque la variable¬†<code>AUTOCOMMIT</code>¬†est√° activada por defecto al inicio de una sesi√≥n SQL, podemos configurarlo para indicar si queremos trabajar con transacciones impl√≠citas o expl√≠citas.</p><p>Podemos consultar el valor actual de¬†<code>AUTOCOMMIT</code>¬†haciendo:</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">SHOW AUTOCOMMIT;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>Para desactivar la variable¬†<code>AUTOCOMMIT</code>¬†hacemos:</li></ul><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> AUTOCOMMIT </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">TO</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> OFF</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Si hacemos esto, siempre tendr√≠amos una transacci√≥n abierta y los cambios s√≥lo se aplicar√≠an en la base de datos ejecutando la sentencia¬†<code>COMMIT</code>¬†de forma expl√≠cita.</p><ul><li>Para activar la variable¬†<code>AUTOCOMMIT</code>¬†hacemos:</li></ul><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> AUTOCOMMIT </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">TO</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> ON</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Para poder trabajar con transacciones en PostgreSQL, no es necesario configurar ning√∫n motor de almacenamiento espec√≠fico, ya que todas las tablas soportan transacciones de manera nativa. Se recomienda la lectura de la documentaci√≥n oficial.</p><aside> üî• <p><strong>EJERCICIO</strong>: Accede a tu cuenta de VDI del m√≥dulo y prueba a desactivar el <code>AUTOCOMMIT</code>. Lanza una Query de modificaci√≥n/insercci√≥n o borrado de un dato y cierra la conexi√≥n con ese usuario sin hacer <code>COMMIT</code>. Comprueba que cuando entres nuevamente el sistema no ha guardado tus cambios.</p></aside><h2 id="_6-4-start-transaction-commit-y-rollback" tabindex="-1"><a class="header-anchor" href="#_6-4-start-transaction-commit-y-rollback"><span>6.4 START TRANSACTION, COMMIT y ROLLBACK</span></a></h2><p>Los pasos para realizar una transacci√≥n en PostgreSQL son los siguientes:</p><ol><li>Indicar que vamos a realizar una transacci√≥n con la sentencia¬†<code>START TRANSACTION</code>,¬†<code>BEGIN</code>¬†o¬†<code>BEGIN WORK</code>.</li><li>Realizar las operaciones de manipulaci√≥n de datos sobre la base de datos (insertar, actualizar o borrar filas).</li><li>Si las operaciones se han realizado correctamente y queremos que los cambios se apliquen de forma permanente sobre la base de datos usaremos la sentencia¬†<code>COMMIT</code>. Sin embargo, si durante las operaciones ocurre alg√∫n error y no queremos aplicar los cambios realizados, podemos deshacerlos con la sentencia¬†<code>ROLLBACK</code>.</li></ol><p>Ejemplos:</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">BEGIN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">UPDATE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> table2 </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> summary </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> SUM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(salary) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> table1 </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> type</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> type</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">COMMIT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><aside> üî• <p><strong>Atenci√≥n</strong>: En PostgreSQL, no se utilizan variables de usuario como en MySQL/MariaDB. En su lugar, se pueden utilizar bloques <code>DO</code> o funciones PL/pgSQL para manejar l√≥gica m√°s compleja.</p></aside><p>A continuaci√≥n ten√©is un ejercicio para comprobar por vosotros mismos el funcionamiento de las transacciones.</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> cliente</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> PRIMARY KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    nombre </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">20</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">BEGIN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> cliente </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Pepe&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">COMMIT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- 1. ¬øQu√© devolver√° esta consulta?</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> cliente;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SET</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> AUTOCOMMIT </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">TO</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> OFF</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> cliente </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Maria&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> cliente </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">20</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Juan&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">DELETE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> cliente </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">WHERE</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> nombre </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;Pepe&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- 2. ¬øQu√© devolver√° esta consulta?</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> cliente;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ROLLBACK</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- 3. ¬øQu√© devolver√° esta consulta?</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> * </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> cliente;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-5-savepoint-rollback-to-savepoint-y-release-savepoint" tabindex="-1"><a class="header-anchor" href="#_6-5-savepoint-rollback-to-savepoint-y-release-savepoint"><span>6.5 SAVEPOINT, ROLLBACK TO SAVEPOINT y RELEASE SAVEPOINT</span></a></h2><p>En PostgreSQL, tambi√©n es posible hacer uso de las sentencias:¬†<code>SAVEPOINT</code>,¬†<code>ROLLBACK TO SAVEPOINT</code>¬†y¬†<code>RELEASE SAVEPOINT</code>.</p><ul><li><strong>SAVEPOINT</strong>: Nos permite establecer un punto de recuperaci√≥n dentro de la transacci√≥n, utilizando un identificador. Si en una transacci√≥n existen dos¬†<code>SAVEPOINT</code>¬†con el mismo nombre, s√≥lo se tendr√° en cuenta el √∫ltimo que se ha definido.</li><li><strong>ROLLBACK TO SAVEPOINT</strong>: Nos permite hacer un¬†<code>ROLLBACK</code>¬†deshaciendo s√≥lo las instrucciones que se hayan ejecutado hasta el¬†<code>SAVEPOINT</code>¬†que se indique.</li><li><strong>RELEASE SAVEPOINT</strong>: Elimina un¬†<code>SAVEPOINT</code>.</li></ul><p>Ejemplo:</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">BEGIN</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> cliente </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Ana&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">SAVEPOINT my_savepoint;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> cliente </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">4</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Luis&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ROLLBACK</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> SAVEPOINT my_savepoint;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">COMMIT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>En este ejemplo, la inserci√≥n de &#39;Luis&#39; se deshar√°, pero la inserci√≥n de &#39;Ana&#39; se mantendr√° y se confirmar√° con el¬†<code>COMMIT</code>.</p><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">CREATE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TABLE</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> producto</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">id </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> UNSIGNED AUTO_INCREMENT </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">PRIMARY KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">nombre </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VARCHAR</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">100</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">NOT NULL</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">precio DOUBLE</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> producto (id, nombre) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Primero&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> producto (id, nombre) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Segundo&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> producto (id, nombre) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Tercero&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- 1. Comprobamos las filas que existen en la tabla</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> *</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> producto;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- 2. Ejecutamos una transacci√≥n que incluye un SAVEPOINT</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">START TRANSACTION</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> producto (id, nombre) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">4</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Cuarto&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">SAVEPOINT sp1;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> producto (id, nombre) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Cinco&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">INSERT INTO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> producto (id, nombre) </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">VALUES</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">6</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;Seis&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">);</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ROLLBACK</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TO</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> sp1;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- 3. ¬øQu√© devolver√° esta consulta?</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> *</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> producto;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-6-acceso-concurrente-a-los-datos" tabindex="-1"><a class="header-anchor" href="#_6-6-acceso-concurrente-a-los-datos"><span>6.6 Acceso concurrente a los datos</span></a></h2><p>Cuando dos transacciones distintas intentan acceder de manera concurrente a los mismos datos pueden ocurrir los siguientes problemas:</p><ul><li><p><strong>Dirty Read (Lectura sucia).</strong> Sucede cuando una segunda transacci√≥n lee datos que est√°n siendo modificados por una transacci√≥n antes de que haga COMMIT. Esto supone dar por buenos datos que a√∫n no sabemos si se formalizaran o ser√°n eliminados mediante un ROLLBACK como en el ejemplo siguiente:</p><figure><img src="" alt="DirtyRead.png" tabindex="0" loading="lazy"><figcaption>DirtyRead.png</figcaption></figure></li><li><p><strong>Non‚ÄëRepeatable Read (Lectura No Repetible).</strong> Se produce cuando una transacci√≥n consulta el mismo dato dos veces durante su vida y, la segunda vez encuentra que el valor del dato ha sido modificado por otra transacci√≥n.</p><figure><img src="" alt="diagramas-transacciones-NonRepeatableRead.png" tabindex="0" loading="lazy"><figcaption>diagramas-transacciones-NonRepeatableRead.png</figcaption></figure></li><li><p><strong>Phantom Read (Lectura fantasma).</strong> Este error ocurre cuando una transacci√≥n ejecuta dos veces una consulta que devuelve un conjunto de filas. El problema se da cuando entre la primera y la segunda ejecuci√≥n de la consulta aparecen nuevas filas en el conjunto.</p><figure><img src="" alt="PhantonRead.png" tabindex="0" loading="lazy"><figcaption>PhantonRead.png</figcaption></figure></li></ul><h2 id="_6-7-niveles-de-aislamiento" tabindex="-1"><a class="header-anchor" href="#_6-7-niveles-de-aislamiento"><span>6.7 Niveles de aislamiento</span></a></h2><p>Para evitar que sucedan los problemas de acceso concurrente que hemos comentado en el punto anterior podemos establecer diferentes niveles de aislamiento que controlan el nivel de bloqueo durante el acceso a los datos.</p><p>El est√°ndar ANSI/ISO de SQL (SQL92) define cuatro niveles de aislamiento.</p><ul><li><p><strong>Read Uncommitted.</strong> En este nivel no se realiza ning√∫n bloqueo, por lo tanto, permite que sucedan los tres problemas</p></li><li><p><strong>Read Committed.</strong> Proporciona dos propiedades:</p><ul><li><p><strong>No Dirty Reads</strong>: La base de datos no va a leer ning√∫n valor de una transacci√≥n que no este commited.</p><figure><img src="" alt="NoDirtyReads.png" tabindex="0" loading="lazy"><figcaption>NoDirtyReads.png</figcaption></figure></li><li><p><strong>No Dirty Writes:</strong> Esto significa que la base de datos aceptar√° cualquier transacci√≥n sobre una fila concreta sobre la que ya se est√© ejecutando una transacci√≥n. La otra transacci√≥n tiene que esperar hasta el momento en que la transacci√≥n anterior en las filas se confirme y s√≥lo despu√©s de eso, cualquier otra transacci√≥n ser√° capaz de realizar una operaci√≥n de escritura para las filas espec√≠ficas.</p><figure><img src="" alt="NoDirtyWrites.png" tabindex="0" loading="lazy"><figcaption>NoDirtyWrites.png</figcaption></figure><p>Sin embargo, en este caso los datos le√≠dos por una transacci√≥n pueden ser modificados por otras transacciones, por lo tanto, se pueden dar los problemas <em>Non‚ÄëRepeteable Read</em> y <em>Phantom Read</em>.</p></li></ul></li><li><p><strong>Repeatable Read.</strong> En este nivel ning√∫n registro le√≠do con un SELECT puede ser modificado en otra transacci√≥n, por lo tanto, s√≥lo puede suceder el problema del <em>Phantom Read</em>.</p></li><li><p><strong>Serializable.</strong> En este caso las transacciones se ejecutan unas detr√°s de otras, sin que exista la posibilidad de concurrencia. Su principal problema es que el sistema no se puede utilizar de forma concurrente.</p></li></ul><aside> üí° El nivel de aislamiento que utiliza PostgreSQL por defecto es **Read Committed** </aside><p>La siguiente tabla muestra los problemas de lectura que pueden ocurrir en cada uno de los modos de aislamiento:</p><table><thead><tr><th><strong>Nivel de Aislamiento</strong></th><th><strong>Dirty Read (Lectura sucia)</strong></th><th><strong>Non-Repeatable Read (Lectura no repetible)</strong></th><th><strong>Phantom Read (Lectura fantasma)</strong></th></tr></thead><tbody><tr><td><strong>Read Uncommitted</strong></td><td>S√≠</td><td>S√≠</td><td>S√≠</td></tr><tr><td><strong>Read Committed</strong></td><td>No</td><td>S√≠</td><td>S√≠</td></tr><tr><td><strong>Repeatable Read</strong></td><td>No</td><td>No</td><td>S√≠</td></tr><tr><td><strong>Serializable</strong></td><td>No</td><td>No</td><td>No</td></tr></tbody></table><h3 id="explicacion-de-los-problemas-de-lectura" tabindex="-1"><a class="header-anchor" href="#explicacion-de-los-problemas-de-lectura"><span>Explicaci√≥n de los problemas de lectura:</span></a></h3><ol><li><strong>Dirty Read (Lectura sucia)</strong>: Ocurre cuando una transacci√≥n lee datos que han sido modificados por otra transacci√≥n pero que a√∫n no han sido confirmados (<code>COMMIT</code>). Si la otra transacci√≥n hace¬†<code>ROLLBACK</code>, los datos le√≠dos ser√°n incorrectos.</li><li><strong>Non-Repeatable Read (Lectura no repetible)</strong>: Ocurre cuando una transacci√≥n lee el mismo dato dos veces, pero obtiene resultados diferentes porque otra transacci√≥n ha modificado y confirmado (<code>COMMIT</code>) ese dato entre las dos lecturas.</li><li><strong>Phantom Read (Lectura fantasma)</strong>: Ocurre cuando una transacci√≥n ejecuta la misma consulta dos veces y obtiene un conjunto de resultados diferente porque otra transacci√≥n ha insertado o eliminado filas que cumplen con la condici√≥n de la consulta.</li></ol><h3 id="niveles-de-aislamiento-en-postgresql" tabindex="-1"><a class="header-anchor" href="#niveles-de-aislamiento-en-postgresql"><span>Niveles de aislamiento en PostgreSQL:</span></a></h3><ul><li><strong>Read Uncommitted</strong>: En PostgreSQL, este nivel de aislamiento funciona igual que¬†<strong>Read Committed</strong>, ya que PostgreSQL no permite lecturas sucias.</li><li><strong>Read Committed</strong>: Es el nivel por defecto. Garantiza que no se lean datos no confirmados, pero permite lecturas no repetibles y lecturas fantasma.</li><li><strong>Repeatable Read</strong>: Garantiza que las lecturas sean repetibles, es decir, si una transacci√≥n lee un dato dos veces, obtendr√° el mismo resultado. Sin embargo, a√∫n pueden ocurrir lecturas fantasma.</li><li><strong>Serializable</strong>: Es el nivel m√°s estricto. Garantiza que las transacciones se ejecuten de manera que el resultado final sea el mismo que si se ejecutaran en serie, una despu√©s de la otra. Evita todos los problemas de lectura: sucia, no repetible y fantasma.</li></ul><h3 id="ejemplo-de-como-cambiar-el-nivel-de-aislamiento-en-postgresql" tabindex="-1"><a class="header-anchor" href="#ejemplo-de-como-cambiar-el-nivel-de-aislamiento-en-postgresql"><span>Ejemplo de c√≥mo cambiar el nivel de aislamiento en PostgreSQL:</span></a></h3><div class="language-sql line-numbers-mode" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-sql"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">BEGIN</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> TRANSACTION</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> ISOLATION</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> LEVEL</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> REPEATABLE</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> READ</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">-- Operaciones SQL</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">COMMIT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Este comando inicia una transacci√≥n con el nivel de aislamiento¬†<strong>Repeatable Read</strong>. Puedes cambiar¬†<code>REPEATABLE READ</code>¬†por¬†<code>READ COMMITTED</code>,¬†<code>READ UNCOMMITTED</code>, o¬†<code>SERIALIZABLE</code>¬†seg√∫n sea necesario.</p><h1 id="_7-creditos" tabindex="-1"><a class="header-anchor" href="#_7-creditos"><span>7. Cr√©ditos</span></a></h1><p>Muchos de los ejercicios y diagramas que aparecen en este texto han sido extra√≠dos de las siguientes referencias:</p><ul><li>El trabajo de desarrollo de m√∫ltiples de los diversos apartados as√≠ como de muchos ejercicios se deben al esfuerzo de Jose Ju√°n S√°nchez del que he tomado gran parte de estos apuntes.<br> ¬°Gracias por compartir vuestro trabajo! üòÉ</li></ul><h1 id="_8-licencia" tabindex="-1"><a class="header-anchor" href="#_8-licencia"><span>8. Licencia</span></a></h1><p>Este contenido se comparte bajo licencia Creative Commons Reconocimiento - NoComercial- CompartirIgual 4.0 Internacional.</p><figure><img src="" alt="by-nc-sa.eu.png" tabindex="0" loading="lazy"><figcaption>by-nc-sa.eu.png</figcaption></figure></div><!----><!----><!----></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com//darioaxel/edit/main/src/docencia/dam-daw/basesdatos/5-tratamiento-datos.md" aria-label="Edit this page on GitHub" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->Edit this page on GitHub<!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">Actualizado el</span><time class="vp-meta-info" datetime="2025-09-08T09:38:27.000Z" data-allow-mismatch>8/9/25, 9:38</time></div><div class="contributors"><span class="vp-meta-label">Contribuidores: </span><!--[--><!--[--><span class="vp-meta-info" title="email: darioaxel@gmail.com">Dario Ure√±a</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/docencia/dam-daw/basesdatos/Ejercicios/" aria-label="Ejercicios"><div class="hint"><span class="arrow start"></span>Anterior</div><div class="link"><!---->Ejercicios</div></a><a class="route-link auto-link next" href="/docencia/dam-daw/basesdatos/0-introduccion.html" aria-label="UT00 Introducci√≥n"><div class="hint">Siguiente<span class="arrow end"></span></div><div class="link">UT00 Introducci√≥n<iconify-icon class="vp-icon" icon="material-symbols:book-5-outline" sizing="height" height="1em"></iconify-icon></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">Default footer</div><div class="vp-copyright">Copyright ¬© 2025 darioaxel </div></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/assets/app-BIs-xwTd.js" defer></script>
  </body>
</html>
